var isTouchOn=!1;Sahi.prototype._touch=function(a,b){"undefined"==typeof b&&(b=1);null!=this.lookInside&&(a=a.inside(this.lookInside));this.checkNull(a,"_touch");this.checkVisible(a);this._isIE()?this.touchInIE(a):this.simulateTouch(a,b)};Sahi.prototype._tap=Sahi.prototype._touch;Sahi.prototype._touchCancel=function(a){null!=this.lookInside&&(a=a.inside(this.lookInside));this.checkNull(a,"_touch");this.checkVisible(a);this._isIE()?this.touchCancelInIE(a):this.simulateTouchSingleEvent(a,"touchcancel")};
Sahi.prototype._touchStart=function(a,b,c){isTouchOn=!0;null!=this.lookInside&&(a=a.inside(this.lookInside));this.checkNull(a,"_touch");this.checkVisible(a);this._isIE()?this.touchStartInIE(a):this.simulateTouchSingleEvent(a,"touchstart",b,c)};Sahi.prototype._touchEnd=function(a,b,c){null!=this.lookInside&&(a=a.inside(this.lookInside));this.checkNull(a,"_touch");this.checkVisible(a);this._isIE()?this.touchEndInIE(a):(this.simulateTouchSingleEvent(a,"touchend",b,c),isTouchOn=!1)};
Sahi.prototype._touchMove=function(a,b,c,e){this._touchStart(a);"undefined"==typeof e&&(e=!0);null!=this.lookInside&&(a=a.inside(this.lookInside));this.checkNull(a,"_touch");this.checkVisible(a);this._isIE()?this.touchMoveInIE(a,b,c):(e||(b-=_sahi._position(a)[0],c-=_sahi._position(a)[1]),this.simulateTouchSingleEvent(a,"touchmove",b,c))};Sahi.prototype._swipe=Sahi.prototype._touchMove;
Sahi.prototype.simulateTouchSingleEvent=function(a,b,c,e){var d=(new Date).getTime(),d=document.createTouch(window,a,d,c,e,0,0),f=document.createTouchList(d),h=document.createTouchList(d),k=document.createTouchList(d);try{this.simulateType(a,d,f,h,k,b,c,e)}catch(g){this._alert(g)}};
Sahi.prototype.simulateTouch=function(a,b){"undefined"==typeof b&&(b=1);this._position(a);this._position(a);for(var c=[],e=(new Date).getTime(),d=0;d<b;d++){var f=document.createTouch(window,a,e,0,0,0,0);c.push(f)}e=document.createTouchList.apply(document,c);d=document.createTouchList.apply(document,c);c=document.createTouchList.apply(document,c);try{this.simulateType(a,f,e,d,c,"touchstart"),this.simulateType(a,f,e,d,c,"touchmove",1,1),this.simulateType(a,f,e,d,c,"touchend")}catch(h){this._alert(h)}};
Sahi.prototype.simulateType=function(a,b,c,e,d,f,h,k){h||(h=0);k||(k=0);var g=document.createEvent("UIEvent");g.initUIEvent(f,!0,!0,window,!0,0,0,h,k,!1,!1,!1,!1,c,e,d,1,0);g.bubbles=!0;g.detail=1;g.cancelable=!0;g.view=window;g.altKey=!1;g.ctrlKey=!1;g.shiftKey=!1;g.metaKey=!1;g.touch=b;g.touches=c;g.targetTouches=e;g.changedTouches=d;a.dispatchEvent(g)};Sahi.prototype.touchInIE=function(a){this.simulateTouchinIE(a)};
Sahi.prototype.simulateTouchinIE=function(a){var b=(new Date).getTime(),c=new MSGesture;c.target=a;try{this.simulateTypeInIE(a,b,c,"MSPointerDown"),this.simulateTypeInIE(a,b,c,"MSPointerMove",1,1),this.simulateTypeInIE(a,b,c,"MSPointerUp")}catch(e){this._alert(e)}};
Sahi.prototype.simulateTypeInIE=function(a,b,c,e,d,f){d||(d=0);f||(f=0);b=document.createEvent("UIEvent");b.initUIEvent(e,!0,!0,window,!0,0,0,d,f,!1,!1,!1,!1);b.view=window;b.altKey=!1;b.ctrlKey=!1;b.shiftKey=!1;b.metaKey=!1;b.touch=c;a.dispatchEvent(b)};
Sahi.prototype.simulateTypeSingleEventInIE=function(a,b,c,e,d,f){d||(d=0);f||(f=0);b=document.createEvent("MSGestureEvent");b.initGestureEvent(e,!0,!0,window,1,0,0,d,f,0,0,0,0,0,0,0,0,0,0,0,0,a);b.type=e;b.bubbles=!0;b.cancelable=!0;b.view=window;b.detail=!0;b.clientX=d;b.clientY=f;b.altKey=!1;b.ctrlKey=!1;b.shiftKey=!1;b.metaKey=!1;b.which=1;b.button=-1;a.dispatchEvent(b)};Sahi.prototype.touchEndInIE=function(a,b,c){this.simulateTouchSingleEventInIE(a,"MSPointerUp",b,c)};
Sahi.prototype.touchStartInIE=function(a,b,c){this.simulateTouchSingleEventInIE(a,"MSPointerDown",b,c)};Sahi.prototype.touchCancelInIE=function(a,b,c){this.simulateTouchSingleEventInIE(a,"MSPointerCancel",b,c)};Sahi.prototype.simulateTouchSingleEventInIE=function(a,b,c,e){var d=(new Date).getTime(),f=new MSGesture;f.target=a;f.pageX=c;f.pageY=e;try{this.simulateTypeSingleEventInIE(a,d,f,b,c,e)}catch(h){this._alert(h)}};
Sahi.prototype.touchMoveInIE=function(a,b,c){this.simulateTouchSingleEventInIE(a,"MSPointerMove",b,c)};